{% extends "base.html" %}
{% block content %}

<nav class="navbar navbar-dark bg-dark fixed-top">
    <a href="#" class="navbar-brand">
        <i class="fas fa-wallet"></i>
        Manage Money
    </a>
    <a href="/logout" align="right" class="logout">logout <i class="fas fa-sign-out-alt"></i></a>
</nav>

<div id="modal" v-cloak>
    <div class="w-m-toggle">
        <input type="checkbox" v-model="checked" data-toggle="toggle" data-style="ios" data-on="月" data-off="週"
            onchange="toggle_clicked(checked, `{{ data.c_food_ex }}`, `{{ data.c_daily_ex }}`, `{{ data.c_hobby_ex }}`)">
    </div>
    <div class="row">
        <div class="col-sm-2"></div>
        <div class="col-sm-1">収入</div>
    </div>
    <div class="row">
        <div class="col-sm-2"></div>
        <div class="col-sm-3 alert alert-warning income" role="alert">
            ￥{{ data.income_d }}
            <i class="far fa-edit fa-pull-right faa-float faa-float-i animated-hover" @click="i_edit(`{{ data.income }}`)"></i>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-2"></div>
        <div class="col-sm-1">支出</div>
    </div>
    <div class="row">
        <div class="col-sm-2"></div>
        <div class="col-sm-3 food-par">
            <div class="card fcard">
                <div class="card-header food">
                    <i class="fas fa-utensils  fa-fw cat-icon"></i>食費（設定：￥{{ data.food_st }}）
                    <i class="far fa-edit fa-pull-right faa-float animated-hover" @click="f_edit(`{{ data.food_st }}`,`{{ data.c_food_ex }}`)"></i>
                </div>
                <div class="card-body food">
                    <p class="pay">使用 ￥{{ data.food_ex_d }}</p>
                    <p class="price">
                        <span v-if="checked">￥{{ data.c_food_ex_d }}</span>
                        <span v-else>￥[[ food_data ]]</span>
                        /<span class="per">[[ per ]]</span>
                    </p>
                </div>
            </div>
        </div>
        <div class="col-sm-1"></div>
        <div class="col-sm-3 rent-par">
            <div class="card">
                <div class="card-header fixed-ex">
                    <i class="fas fa-home  fa-fw cat-icon"></i>家賃
                    <i class="far fa-edit fa-pull-right faa-float animated-hover" @click="r_edit(`{{ data.rent_cost }}`)"></i>
                </div>
                <div class="card-body">
                    <p class="price">￥{{ data.rent_cost_d }}</p>
                </div>
            </div>
        </div>
    </div>
    <br>
    <div class="row">
        <div class="col-sm-2"></div>
        <div class="col-sm-3 daily-par">
            <div class="card fdaily">
                <div class="card-header daily">
                    <i class="fas fa-shopping-bag  fa-fw cat-icon"></i>日用品（設定：￥{{ data.daily_st }}）
                    <i class="far fa-edit fa-pull-right faa-float animated-hover" @click="d_edit(`{{ data.daily_st }}`,`{{ data.c_daily_ex }}`)"></i>
                </div>
                <div class="card-body daily">
                    <p class="pay">使用 ￥{{ data.daily_ex_d }}</p>
                    <p class="price">
                        <span v-if="checked">￥{{ data.c_daily_ex_d }}</span>
                        <span v-else>￥[[ daily_data ]]</span>
                        /<span class="per">[[ per ]]</span>
                    </p>
                </div>
            </div>
        </div>
        <div class="col-sm-1"></div>
        <div class="col-sm-3 scholar-par">
            <div class="card">
                <div class="card-header fixed-ex">
                    <i class="fas fa-graduation-cap  fa-fw cat-icon"></i>奨学金
                    <i class="far fa-edit fa-pull-right faa-float animated-hover" @click="s_edit(`{{ data.scholar }}`)"></i>
                </div>
                <div class="card-body">
                    <p class="price">￥{{ data.scholar_d }}</p>
                </div>
            </div>
        </div>
    </div>
    <br>
    <div class="row">
        <div class="col-sm-2"></div>
        <div class="col-sm-3 hobby-par">
            <div class="card fhobby">
                <div class="card-header hobby">
                    <i class="fas fa-gamepad  fa-fw cat-icon"></i>趣味（設定：￥{{ data.hobby_st }}）
                    <i class="far fa-edit fa-pull-right faa-float animated-hover" @click="h_edit(`{{ data.hobby_st }}`,`{{ data.c_hobby_ex }}`)"></i>
                </div>
                <div class="card-body hobby">
                    <p class="pay">使用 ￥{{ data.hobby_ex_d }}</p>
                    <p class="price">
                        <span v-if="checked">￥{{ data.c_hobby_ex_d }}</span>
                        <span v-else>￥[[ hobby_data ]]</span>
                        /<span class="per">[[ per ]]</span>
                    </p>
                </div>
            </div>
        </div>
        <div class="col-sm-1"></div>
        <div class="col-sm-3 util-par">
            <div class="card">
                <div class="card-header fixed-ex">
                    <i class="fas fa-lightbulb  fa-fw cat-icon"></i>光熱費
                    <i class="far fa-edit fa-pull-right faa-float animated-hover" @click="u_edit(`{{ data.utility_cost }}`)"></i>
                </div>
                <div class="card-body">
                    <p class="price">￥{{ data.utility_cost_d }}</p>
                </div>
            </div>
        </div>
    </div>
    <br>
    <div class="row">
        <div class="col-sm-2"></div>
        <div class="col-sm-3 last-par">
            <div class="card flast">
                <div class="card-header last">
                    <i class="fas fa-piggy-bank  fa-fw cat-icon"></i>残高
                </div>
                <div class="card-body last">
                    <p class="pay">使用 ￥{{ data.last_ex_d }}</p>
                    <p class="price">￥{{ data.c_last_ex_d }}</p>
                </div>
            </div>
        </div>
        <div class="col-sm-1"></div>
        <div class="col-sm-3 other-par">
            <div class="card">
                <div class="card-header fixed-ex">
                    <i class="fas fa-mobile-alt  fa-fw cat-icon"></i>通信費・その他
                    <i class="far fa-edit fa-pull-right faa-float animated-hover" @click="o_edit(`{{ data.other }}`)"></i>
                </div>
                <div class="card-body">
                    <p class="price">￥{{ data.other_d }}</p>
                </div>
            </div>
        </div>
    </div>

    <!---------------------------- modal ---------------------------->

    <modal v-if="showModal == '1'" @close="showModal = false" :key="1">
        <h4 slot="header">食費</h4>
        <div slot="body">
            <form v-on:submit.prevent="submit('food')" id="food_e">
                <div class="form-group edit-form">
                    設定額：<input v-bind:value="st_val" type="text" required="required" name="food_st_e" id="food_st_e"
                        class="edit-input">
                </div>
                <div class="form-group edit-form">
                    使用額：<input v-bind:value="`{{ data.food_ex }}`" type="text" required="required" name="food_ex_e" id="food_ex_e"
                        class="edit-input">
                </div>
                <div>
                    <button type="submit" class="btn btn-primary edit-btn">完了</button>
                </div>
            </form>
        </div>
    </modal>

    <modal v-if="showModal == '2'" @close="showModal = false" :key="2">
        <h4 slot="header">日用品</h4>
        <div slot="body">
            <form v-on:submit.prevent="submit('daily')" id="daily_e">
                <div class="form-group edit-form">
                    設定額：<input v-bind:value="st_val" type="text" required="required" name="daily_st_e" id="daily_st_e"
                        class="edit-input">
                </div>
                <div class="form-group edit-form">
                    使用額：<input v-bind:value="`{{ data.daily_ex }}`" type="text" required="required" name="daily_ex_e"
                        id="daily_ex_e" class="edit-input">
                </div>
                <div>
                    <button type="submit" class="btn btn-primary edit-btn">完了</button>
                </div>
            </form>
        </div>
    </modal>

    <modal v-if="showModal == '3'" @close="showModal = false" :key="3">
        <h4 slot="header">趣味</h4>
        <div slot="body">
            <form v-on:submit.prevent="submit('hobby')" id="hobby_e">
                <div class="form-group edit-form">
                    設定額：<input v-bind:value="st_val" type="text" required="required" name="hobby_st_e" id="hobby_st_e"
                        class="edit-input">
                </div>
                <div class="form-group edit-form">
                    使用額：<input v-bind:value="`{{ data.hobby_ex }}`" type="text" required="required" name="hobby_ex_e"
                        id="hobby_ex_e" class="edit-input">
                </div>
                <div>
                    <button type="submit" class="btn btn-primary edit-btn">完了</button>
                </div>
            </form>
        </div>
    </modal>

    <modal v-if="showModal == '4'" @close="showModal = false" :key="4">
        <h4 slot="header">家賃</h4>
        <div slot="body">
            <form v-on:submit.prevent="submit('rent')" id="rent_f_e">
                <div class="form-group edit-form">
                    金額：<input v-bind:value="st_val" type="text" required="required" name="rent_e" id="rent_e" class="edit-input">
                </div>
                <div>
                    <button type="submit" class="btn btn-primary edit-btn">完了</button>
                </div>
            </form>
        </div>
    </modal>

    <modal v-if="showModal == '5'" @close="showModal = false" :key="5">
        <h4 slot="header">奨学金</h4>
        <div slot="body">
            <form v-on:submit.prevent="submit('scholar')" id="scholar_f_e">
                <div class="form-group edit-form">
                    金額：<input v-bind:value="st_val" type="text" required="required" name="scholar_e" id="scholar_e"
                        class="edit-input">
                </div>
                <div>
                    <button type="submit" class="btn btn-primary edit-btn">完了</button>
                </div>
            </form>
        </div>
    </modal>

    <modal v-if="showModal == '6'" @close="showModal = false" :key="6">
        <h4 slot="header">光熱費</h4>
        <div slot="body">
            <form v-on:submit.prevent="submit('util')" id="util_f_e">
                <div class="form-group edit-form">
                    金額：<input v-bind:value="st_val" type="text" required="required" name="util_e" id="util_e" class="edit-input">
                </div>
                <div>
                    <button type="submit" class="btn btn-primary edit-btn">完了</button>
                </div>
            </form>
        </div>
    </modal>

    <modal v-if="showModal == '7'" @close="showModal = false" :key="7">
        <h4 slot="header">通信費・その他</h4>
        <div slot="body">
            <form v-on:submit.prevent="submit('other')" id="other_f_e">
                <div class="form-group edit-form">
                    金額：<input v-bind:value="st_val" type="text" required="required" name="other_e" id="other_e" class="edit-input">
                </div>
                <div>
                    <button type="submit" class="btn btn-primary edit-btn">完了</button>
                </div>
            </form>
        </div>
    </modal>

    <modal v-if="showModal == '8'" @close="showModal = false" :key="8">
        <h4 slot="header">収入</h4>
        <div slot="body">
            <form v-on:submit.prevent="submit('income')" id="income_f_e">
                <div class="form-group edit-form">
                    金額：<input v-bind:value="st_val" type="text" required="required" name="income_e" id="income_e" class="edit-input">
                </div>
                <div>
                    <button type="submit" class="btn btn-primary edit-btn">完了</button>
                </div>
            </form>
        </div>
    </modal>

</div>

<!--モーダルの中身のテンプレート-->
<script type="text/x-template" id="modal-template">
    <transition name="modal">
        <div class="modal-mask">
            <div class="modal-wrapper" @click.self="$emit('close')">
                <div class="modal-container">
                    <div class="modal-header">
                        <slot name="header"></slot>
                    </div>
                    <div class="modal-body">
                        <slot name="body"></slot>
                    </div>
                </div>
            </div>
        </div>
    </transition>
</script>

{% endblock %}